<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>اخلاق اسلامی</title>
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      font-family: "Tahoma", sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #fff;
      direction: rtl;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      padding: 14px;
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,215,0,0.3);
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }

    .mode-btn {
      padding: 12px 24px;
      border: none;
      border-radius: 30px;
      background: rgba(255,255,255,0.15);
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
    }

    .mode-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #ffd700, #ff9800);
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: -1;
    }

    .mode-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(255,215,0,0.3);
    }

    .mode-btn.active {
      color: #1a1a1a;
      background: linear-gradient(135deg, #ffd700, #ff9800);
      box-shadow: 0 4px 16px rgba(255,215,0,0.5);
    }

    .mode-btn.active::before {
      opacity: 1;
    }

    .center-wrap {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .question-box {
      width: 100%;
      max-width: 700px;
      background: rgba(255,255,255,0.12);
      backdrop-filter: blur(16px);
      border-radius: 26px;
      padding: 28px;
      box-shadow: 0 12px 28px rgba(255,215,0,0.25), inset 0 0 0 1px rgba(255,255,255,0.18);
    }

    .progress-container {
      margin-bottom: 24px;
      text-align: center;
    }

    .progress-label {
      font-size: 14px;
      color: #ffd700;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(255,255,255,0.2);
      border-radius: 10px;
      overflow: hidden;
      position: relative;
      box-shadow: inset 0 0 4px rgba(0,0,0,0.3);
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #ffd700, #ff9800);
      border-radius: 10px;
      transition: width 0.5s cubic-bezier(0.22, 0.61, 0.36, 1);
      position: relative;
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .question-title {
      font-size: 22px;
      margin-bottom: 24px;
      color: #ffd700;
      text-shadow: 0 0 10px rgba(255,215,0,0.5);
      line-height: 1.8;
      font-weight: bold;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .option {
      background: rgba(255,255,255,0.18);
      padding: 16px 20px;
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 18px;
      font-weight: 600;
      border: 1px solid transparent;
      position: relative;
      overflow: hidden;
    }

    .option:hover {
      background: rgba(255,255,255,0.28);
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
    }

    .option.selected {
      background: linear-gradient(135deg, #ffd700, #ffb700);
      color: #1a1a1a;
      box-shadow: 0 0 0 2px rgba(255,215,0,0.6), 0 6px 16px rgba(255,215,0,0.4);
      border-color: #ffb300;
    }

    .confirm-btn {
      margin-top: 20px;
      width: 100%;
      padding: 16px;
      border: none;
      border-radius: 16px;
      background: linear-gradient(135deg, #2ecc71, #27ae60);
      color: #fff;
      font-weight: 800;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 8px 16px rgba(46,204,113,0.3);
      position: relative;
      overflow: hidden;
    }

    .confirm-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(46,204,113,0.4);
    }

    .confirm-btn:active {
      transform: translateY(0);
    }

    .result-box {
      margin-top: 20px;
      padding: 20px;
      background: rgba(255,255,255,0.1);
      border-radius: 16px;
      max-height: 400px;
      overflow-y: auto;
    }

    .result-item {
      margin-bottom: 16px;
      padding: 12px;
      background: rgba(255,255,255,0.08);
      border-radius: 12px;
      font-size: 15px;
      line-height: 1.6;
    }

    .correct {
      color: #2ecc71;
      font-weight: bold;
    }

    .incorrect {
      color: #e74c3c;
      font-weight: bold;
    }

    footer {
      text-align: center;
      padding: 14px;
      font-size: 13px;
      color: #ccc;
      background: rgba(0,0,0,0.2);
      margin-top: auto;
    }

    /* انیمیشن لرزش */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    .shake {
      animation: shake 0.3s ease-in-out;
    }

    @media (max-width: 768px) {
      .question-box { max-width: 95vw; padding: 22px; }
      .question-title { font-size: 20px; }
      .mode-btn { padding: 10px 20px; font-size: 14px; }
    }

    @media (max-width: 360px) {
      .question-title { font-size: 18px; }
      .option { font-size: 16px; padding: 14px; }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <button class="mode-btn" id="btn-four" onclick="setMode('four')">چهار گزینه‌ای</button>
      <button class="mode-btn" id="btn-truefalse" onclick="setMode('truefalse')">درست / غلط</button>
    </header>

    <div class="center-wrap">
      <div class="question-box" id="qbox">
        <div class="progress-container">
          <div class="progress-label" id="progressLabel">سوال 1 از 20</div>
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
          </div>
        </div>

        <h2 class="question-title" id="question">سؤال</h2>
        <div class="options" id="options"></div>
        <button class="confirm-btn" onclick="handleConfirm()">تأیید</button>
        <div class="result-box" id="result" style="display: none;"></div>
      </div>
    </div>

    <footer> <h2>طراح سایت : مهدی کلیدری</h2></footer>
  </div>

  <script>
    const data = {
      four: [
        { q: "هدف نهایی اخلاق اسلامی چیست؟", opts: ["رسیدن به سعادت و کمال انسانی", "افزایش ثروت", "کسب قدرت سیاسی", "رقابت اجتماعی"], correct: 0 },
        { q: "کدام‌یک از اصول زیر از مبانی اخلاق اسلامی محسوب می‌شود؟", opts: ["توحید", "نسبی‌گرایی اخلاقی", "فردگرایی مطلق", "سودگرایی"], correct: 0 },
        { q: "عدالت در اخلاق اسلامی به چه معناست؟", opts: ["مساوات مطلق", "قرار دادن هر چیز در جای خود", "تقسیم برابر ثروت", "آزادی بی‌حد و مرز"], correct: 1 },
        { q: "کدام‌یک از موارد زیر از فضایل اخلاقی در اسلام است؟", opts: ["صداقت", "حسادت", "تکبر", "دروغ"], correct: 0 },
        { q: "مبانی اخلاق اسلامی بیشتر بر چه منابعی استوار است؟", opts: ["قرآن و سنت پیامبر (ص)", "فلسفه یونان", "عرف اجتماعی", "تجربه شخصی"], correct: 0 },
        { q: "کدام‌یک از رذایل اخلاقی در اسلام به شدت نکوهش شده است؟", opts: ["تواضع", "تکبر", "ایثار", "صداقت"], correct: 1 },
        { q: "اخلاق اسلامی چه رابطه‌ای با ایمان دارد؟", opts: ["هیچ ارتباطی ندارد", "مکمل ایمان است", "جایگزین ایمان است", "مانع ایمان است"], correct: 1 },
        { q: "کدام‌یک از اهداف تربیت اخلاقی در اسلام است؟", opts: ["رشد عقلانی و معنوی انسان", "افزایش قدرت نظامی", "توسعه اقتصادی", "رقابت اجتماعی"], correct: 0 },
        { q: "در اخلاق اسلامی، «تقوا» به چه معناست؟", opts: ["پرهیز از گناه و انجام وظایف الهی", "افزایش ثروت", "کسب قدرت سیاسی", "آزادی مطلق"], correct: 0 },
        { q: "کدام‌یک از منابع شناخت اخلاق اسلامی است؟", opts: ["عقل و وحی", "تجربه شخصی", "عرف اجتماعی", "فلسفه غرب"], correct: 0 },
        { q: "صداقت در اخلاق اسلامی چه جایگاهی دارد؟", opts: ["اصل اساسی روابط انسانی", "یک امر اختیاری", "بی‌اهمیت", "فقط در معاملات لازم است"], correct: 0 },
        { q: "کدام‌یک از آثار رعایت اخلاق اسلامی در جامعه است؟", opts: ["افزایش اعتماد اجتماعی", "کاهش همکاری", "افزایش فساد", "بی‌تفاوتی اجتماعی"], correct: 0 },
        { q: "در اخلاق اسلامی، «ایثار» به چه معناست؟", opts: ["ترجیح دادن دیگران بر خود در امور خیر", "خودخواهی", "رقابت ناسالم", "بی‌تفاوتی"], correct: 0 },
        { q: "کدام‌یک از ویژگی‌های انسان اخلاقی در اسلام است؟", opts: ["تواضع", "تکبر", "حسادت", "دروغ"], correct: 0 },
        { q: "اخلاق اسلامی چه رابطه‌ای با حقوق دارد؟", opts: ["مکمل حقوق است", "جایگزین حقوق است", "مانع حقوق است", "هیچ ارتباطی ندارد"], correct: 0 },
        { q: "کدام‌یک از اصول اخلاق اجتماعی در اسلام است؟", opts: ["تعاون و همکاری", "رقابت ناسالم", "بی‌تفاوتی اجتماعی", "خودخواهی"], correct: 0 },
        { q: "در اخلاق اسلامی، «عدالت» چه نقشی دارد؟", opts: ["اساس روابط اجتماعی", "بی‌اهمیت", "فقط در اقتصاد لازم است", "مانع آزادی است"], correct: 0 },
        { q: "کدام‌یک از اهداف اخلاق اسلامی است؟", opts: ["تعالی روحی و معنوی انسان", "افزایش قدرت سیاسی", "توسعه اقتصادی", "رقابت اجتماعی"], correct: 0 },
        { q: "در اخلاق اسلامی، «حیا» به چه معناست؟", opts: ["پرهیز از کارهای زشت و ناپسند", "بی‌تفاوتی", "خودخواهی", "رقابت ناسالم"], correct: 0 },
        { q: "کدام‌یک از آثار بی‌اخلاقی در جامعه است؟", opts: ["افزایش فساد و بی‌اعتمادی", "افزایش همکاری", "افزایش اعتماد اجتماعی", "کاهش فساد"], correct: 0 }
      ],
      truefalse: [
        { q: "اخلاق اسلامی تنها به رفتار فردی انسان توجه دارد.", opts: ["درست", "غلط"], correct: 1 },
        { q: "صداقت یکی از اصول اساسی اخلاق اسلامی است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "عدالت در اخلاق اسلامی به معنای مساوات مطلق است.", opts: ["درست", "غلط"], correct: 1 },
        { q: "اخلاق اسلامی بر پایه عقل و وحی بنا شده است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "هدف اخلاق اسلامی تنها کنترل رفتار بیرونی انسان است.", opts: ["درست", "غلط"], correct: 1 },
        { q: "تواضع از فضایل اخلاقی در اسلام است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "تکبر از فضایل اخلاقی در اسلام است.", opts: ["درست", "غلط"], correct: 1 },
        { q: "ایثار به معنای ترجیح دادن دیگران بر خود در امور خیر است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "اخلاق اسلامی هیچ ارتباطی با ایمان ندارد.", opts: ["درست", "غلط"], correct: 1 },
        { q: "تقوا به معنای پرهیز از گناه و انجام وظایف الهی است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "اخلاق اسلامی تنها به روابط اجتماعی توجه دارد.", opts: ["درست", "غلط"], correct: 1 },
        { q: "رعایت اخلاق اسلامی موجب افزایش اعتماد اجتماعی می‌شود.", opts: ["درست", "غلط"], correct: 0 },
        { q: "حسادت از فضایل اخلاقی در اسلام است.", opts: ["درست", "غلط"], correct: 1 },
        { q: "عدالت اساس روابط اجتماعی در اسلام است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "اخلاق اسلامی مکمل حقوق است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "بی‌تفاوتی اجتماعی از اصول اخلاق اسلامی است.", opts: ["درست", "غلط"], correct: 1 },
        { q: "تعاون و همکاری از اصول اخلاق اجتماعی در اسلام است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "حیا به معنای پرهیز از کارهای زشت و ناپسند است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "اخلاق اسلامی هیچ ارتباطی با قرآن و سنت ندارد.", opts: ["درست", "غلط"], correct: 1 },
        { q: "هدف اخلاق اسلامی تعالی روحی و معنوی انسان است.", opts: ["درست", "غلط"], correct: 0 }
      ]
    };

    let mode = "four";
    let currentIndex = 0;
    let selectedIndex = null;
    let userAnswers = [];

    function setMode(m) {
      mode = m;
      currentIndex = 0;
      selectedIndex = null;
      userAnswers = [];
      document.getElementById("result").style.display = "none";
      document.querySelector(".confirm-btn").style.display = "inline-block";
      
      // به‌روز کردن حالت دکمه‌ها
      document.querySelectorAll('.mode-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById(`btn-${m}`).classList.add('active');
      
      renderQuestion();
      updateProgressBar();
    }

    function renderQuestion() {
      const list = data[mode];
      const item = list[currentIndex];
      document.getElementById("question").innerText = `سوال ${currentIndex + 1}: ${item.q}`;

      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";

      item.opts.forEach((text, idx) => {
        const el = document.createElement("div");
        el.className = "option";
        el.innerText = text;
        el.onclick = () => selectOption(idx, el);
        optionsDiv.appendChild(el);
      });
    }

    function selectOption(idx, el) {
      selectedIndex = idx;
      document.querySelectorAll(".option").forEach(o => o.classList.remove("selected"));
      el.classList.add("selected");
    }

    function updateProgressBar() {
      const total = data[mode].length;
      const progress = (currentIndex / total) * 100;
      
      document.getElementById("progressFill").style.width = progress + "%";
      document.getElementById("progressLabel").innerText = `سوال ${currentIndex + 1} از ${total}`;
    }

    function handleConfirm() {
      const qbox = document.getElementById("qbox");
      if (selectedIndex === null) {
        qbox.classList.add("shake");
        setTimeout(() => qbox.classList.remove("shake"), 360);
        return;
      }

      userAnswers.push({
        question: data[mode][currentIndex].q,
        userAnswer: selectedIndex,
        correctAnswer: data[mode][currentIndex].correct,
        options: data[mode][currentIndex].opts
      });

      currentIndex++;
      selectedIndex = null;

      if (currentIndex < data[mode].length) {
        renderQuestion();
        updateProgressBar();
      } else {
        showResults();
      }
    }

    function showResults() {
      document.getElementById("options").innerHTML = "";
      document.querySelector(".confirm-btn").style.display = "none";
      document.getElementById("question").innerText = "نتیجه آزمون";
      
      // پر کردن نوار پیشرفت در پایان
      document.getElementById("progressFill").style.width = "100%";
      document.getElementById("progressLabel").innerText = `پایان آزمون (${data[mode].length} سوال)`;

      let correctCount = 0;
      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = "";
      resultDiv.style.display = "block";

      userAnswers.forEach((item, index) => {
        const isCorrect = item.userAnswer === item.correctAnswer;
        if (isCorrect) correctCount++;

        const div = document.createElement("div");
        div.className = "result-item";
        div.innerHTML = `<strong>سوال ${index + 1}:</strong> ${item.question}<br>`;

        item.options.forEach((opt, i) => {
          const span = document.createElement("span");
          span.innerText = `${i + 1}. ${opt}`;
          if (i === item.correctAnswer) {
            span.className = "correct";
          } else if (i === item.userAnswer && !isCorrect) {
            span.className = "incorrect";
          }
          div.appendChild(span);
          div.appendChild(document.createElement("br"));
        });

        resultDiv.appendChild(div);
      });

      const score = (correctCount / data[mode].length) * 100;
      resultDiv.innerHTML = `<h3>امتیاز شما: ${score.toFixed(0)}٪ (${correctCount} از ${data[mode].length} پاسخ درست)</h3>` + resultDiv.innerHTML;
    }

    // بارگذاری اولیه
    document.getElementById('btn-four').classList.add('active');
    renderQuestion();
    updateProgressBar();
  </script>
</body>
</html>
