<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>آزمون اخلاق اسلامی</title>
  <style>
    body {
      margin: 0;
      font-family: "Tahoma", sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #fff;
      direction: rtl;
    }

    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      padding: 14px;
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,0.15);
    }

    .mode-btn {
      padding: 12px 18px;
      border: none;
      border-radius: 30px;
      background: linear-gradient(135deg, #ffd700, #ff9800);
      color: #1a1a1a;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
      box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
    }

    .mode-btn:hover {
      transform: scale(1.06);
      background: linear-gradient(135deg, #ffe066, #ffb300);
    }

    .center-wrap {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .question-box {
      width: 100%;
      max-width: 700px;
      background: rgba(255,255,255,0.12);
      backdrop-filter: blur(16px);
      border-radius: 26px;
      padding: 28px;
      box-shadow: 0 12px 28px rgba(255,215,0,0.25), inset 0 0 0 1px rgba(255,255,255,0.18);
    }

    .question-title {
      font-size: 22px;
      margin-bottom: 16px;
      color: #ffd700;
      text-shadow: 0 0 10px rgba(255,215,0,0.5);
      line-height: 1.8;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .option {
      background: rgba(255,255,255,0.18);
      padding: 16px;
      border-radius: 16px;
      cursor: pointer;
      transition: 0.25s;
      font-size: 18px;
      font-weight: 600;
      border: 1px solid transparent;
    }

    .option:hover {
      background: rgba(255,255,255,0.28);
      transform: translateY(-2px);
    }

    .option.selected {
      background: #ffd700;
      color: #1a1a1a;
      box-shadow: 0 0 0 2px rgba(255,215,0,0.6);
      border-color: #ffb300;
    }

    .confirm-btn {
      margin-top: 20px;
      width: 100%;
      padding: 16px;
      border: none;
      border-radius: 16px;
      background: linear-gradient(135deg, #2ecc71, #27ae60);
      color: #fff;
      font-weight: 800;
      font-size: 18px;
      cursor: pointer;
      transition: 0.3s;
      box-shadow: 0 8px 16px rgba(46,204,113,0.3);
    }

    .confirm-btn:hover {
      transform: scale(1.04);
      background: linear-gradient(135deg, #32d67d, #2ecc71);
    }

    .result-box {
      margin-top: 20px;
      padding: 20px;
      background: rgba(255,255,255,0.1);
      border-radius: 16px;
    }

    .result-item {
      margin-bottom: 10px;
      font-size: 16px;
    }

    .correct {
      color: #2ecc71;
    }

    .incorrect {
      color: #e74c3c;
    }

    footer {
      text-align: center;
      padding: 14px;
      font-size: 13px;
      color: #ccc;
    }

    @media (max-width: 360px) {
      .question-box { max-width: 95vw; padding: 22px; }
      .question-title { font-size: 20px; }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <button class="mode-btn" onclick="setMode('four')">چهار گزینه‌ای</button>
      <button class="mode-btn" onclick="setMode('truefalse')">درست/غلط</button>
      <button class="mode-btn" onclick="setMode('two')">دو گزینه‌ای</button>
    </header>

    <div class="center-wrap">
      <div class="question-box" id="qbox">
        <h2 class="question-title" id="question">سؤال</h2>
        <div class="options" id="options"></div>
        <button class="confirm-btn" onclick="handleConfirm()">تأیید</button>
        <div class="result-box" id="result" style="display: none;"></div>
      </div>
    </div>

    <footer>طراحی هوشمند • مناسب موبایل</footer>
  </div>

  <script>
    const data = {
      four: [
        { q: "هدف نهایی اخلاق اسلامی چیست؟", opts: ["رسیدن به سعادت و کمال انسانی", "افزایش ثروت", "کسب قدرت سیاسی", "رقابت اجتماعی"], correct: 0 },
        { q: "کدام‌یک از اصول زیر از مبانی اخلاق اسلامی محسوب می‌شود؟", opts: ["توحید", "نسبی‌گرایی اخلاقی", "فردگرایی مطلق", "سودگرایی"], correct: 0 },
        { q: "عدالت در اخلاق اسلامی به چه معناست؟", opts: ["مساوات مطلق", "قرار دادن هر چیز در جای خود", "تقسیم برابر ثروت", "آزادی بی‌حد و مرز"], correct: 1 },
        { q: "کدام‌یک از موارد زیر از فضایل اخلاقی در اسلام است؟", opts: ["صداقت", "حسادت", "تکبر", "دروغ"], correct: 0 },
        { q: "مبانی اخلاق اسلامی بیشتر بر چه منابعی استوار است؟", opts: ["قرآن و سنت پیامبر (ص)", "فلسفه یونان", "عرف اجتماعی", "تجربه شخصی"], correct: 0 },
        { q: "کدام‌یک از رذایل اخلاقی در اسلام به شدت نکوهش شده است؟", opts: ["تواضع", "تکبر", "ایثار", "صداقت"], correct: 1 },
        { q: "اخلاق اسلامی چه رابطه‌ای با ایمان دارد؟", opts: ["هیچ ارتباطی ندارد", "مکمل ایمان است", "جایگزین ایمان است", "مانع ایمان است"], correct: 1 },
        { q: "در اخلاق اسلامی، «تقوا» به چه معناست؟", opts: ["پرهیز از گناه و انجام وظایف الهی", "افزایش ثروت", "کسب قدرت سیاسی", "آزادی مطلق"], correct: 0 },
        { q: "کدام‌یک از منابع شناخت اخلاق اسلامی است؟", opts: ["عقل و وحی", "تجربه شخصی", "عرف اجتماعی", "فلسفه غرب"], correct: 0 },
        { q: "هدف اخلاق اسلامی چیست؟", opts: ["تعالی روحی و معنوی", "افزایش قدرت", "توسعه اقتصادی", "رقابت اجتماعی"], correct: 0 },
      ],
      truefalse: [
        { q: "اخلاق اسلامی تنها به رفتار فردی انسان توجه دارد.", opts: ["درست", "غلط"], correct: 1 },
        { q: "صداقت یکی از اصول اساسی اخلاق اسلامی است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "عدالت در اخلاق اسلامی به معنای مساوات مطلق است.", opts: ["درست", "غلط"], correct: 1 },
        { q: "اخلاق اسلامی بر پایه عقل و وحی بنا شده است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "تواضع از فضایل اخلاقی در اسلام است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "تکبر از فضایل اخلاقی در اسلام است.", opts: ["درست", "غلط"], correct: 1 },
        { q: "ایثار به معنای ترجیح دادن دیگران بر خود در امور خیر است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "اخلاق اسلامی هیچ ارتباطی با ایمان ندارد.", opts: ["درست", "غلط"], correct: 1 },
        { q: "تقوا به معنای پرهیز از گناه و انجام وظایف الهی است.", opts: ["درست", "غلط"], correct: 0 },
        { q: "هدف اخلاق اسلامی تعالی روحی و معنوی انسان است.", opts: ["درست", "غلط"], correct: 0 },
      ],
      two: [
        { q: "خودفراموشی به خودفریبی منتهی می‌شود؟", opts: ["بله", "خیر"], correct: 0 },
        { q: "تسویل در قرآن به معنای توجیه نفس در انجام کار زشت است؟", opts: ["بله", "خیر"], correct: 0 },
        { q: "خودآگاهی در خودسازی اخلاقی نقش دارد؟", opts: ["بله", "خیر"], correct: 0 },
        { q: "قناعت می‌تواند به آرامش روانی منجر شود؟", opts: ["بله", "خیر"], correct: 0 },
        { q: "حکمت فقط با مطالعه کتاب به دست می‌آید؟", opts: ["بله", "خیر"], correct: 1 },
        { q: "عزت نفس سالم با تکبر تفاوت دارد؟", opts: ["بله", "خیر"], correct: 0 },
        { q: "غفلت از خدا باعث سقوط اخلاقی می‌شود؟", opts: ["بله", "خیر"], correct: 0 },
        { q: "کفران نعمت به ناسپاسی گفته می‌شود؟", opts: ["بله", "خیر"], correct: 0 },
        { q: "تقوا مانع گناه می‌شود؟", opts: ["بله", "خیر"], correct: 0 },
        { q: "توکل با تلاش منافات دارد؟", opts: ["بله", "خیر"], correct: 1 },
      ]
    };

    let mode = "four";
    let currentIndex = 0;
    let selectedIndex = null;
    let userAnswers = [];

    function setMode(m) {
      mode = m;
      currentIndex = 0;
      selectedIndex = null;
      userAnswers = [];
      document.getElementById("result").style.display = "none";
      document.querySelector(".confirm-btn").style.display = "inline-block";
      renderQuestion();
    }

    function renderQuestion() {
      const list = data[mode];
      const item = list[currentIndex];
      document.getElementById("question").innerText = `سوال ${currentIndex + 1}: ${item.q}`;

      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";

      item.opts.forEach((text, idx) => {
        const el = document.createElement("div");
        el.className = "option";
        el.innerText = text;
        el.onclick = () => selectOption(idx, el);
        optionsDiv.appendChild(el);
      });
    }

    function selectOption(idx, el) {
      selectedIndex = idx;
      document.querySelectorAll(".option").forEach(o => o.classList.remove("selected"));
      el.classList.add("selected");
    }

    function handleConfirm() {
      const qbox = document.getElementById("qbox");
      if (selectedIndex === null) {
        qbox.classList.add("shake");
        setTimeout(() => qbox.classList.remove("shake"), 360);
        return;
      }

      userAnswers.push({
        question: data[mode][currentIndex].q,
        userAnswer: selectedIndex,
        correctAnswer: data[mode][currentIndex].correct,
        options: data[mode][currentIndex].opts
      });

      currentIndex++;
      selectedIndex = null;

      if (currentIndex < data[mode].length) {
        renderQuestion();
      } else {
        showResults();
      }
    }

    function showResults() {
      document.getElementById("options").innerHTML = "";
      document.querySelector(".confirm-btn").style.display = "none";
      document.getElementById("question").innerText = "نتیجه آزمون";

      let correctCount = 0;
      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = "";
      resultDiv.style.display = "block";

      userAnswers.forEach((item, index) => {
        const isCorrect = item.userAnswer === item.correctAnswer;
        if (isCorrect) correctCount++;

        const div = document.createElement("div");
        div.className = "result-item";
        div.innerHTML = `<strong>سوال ${index + 1}:</strong> ${item.question}<br>`;

        item.options.forEach((opt, i) => {
          const span = document.createElement("span");
          span.innerText = opt;
          if (i === item.correctAnswer) {
            span.className = "correct";
          } else if (i === item.userAnswer && !isCorrect) {
            span.className = "incorrect";
          }
          div.appendChild(span);
          div.appendChild(document.createElement("br"));
        });

        resultDiv.appendChild(div);
      });

      const score = (correctCount / data[mode].length) * 100;
      resultDiv.innerHTML = `<h3>امتیاز شما: ${score.toFixed(0)}٪ (${correctCount} از ${data[mode].length} پاسخ درست)</h3>` + resultDiv.innerHTML;
    }

    // بارگذاری اولیه
    renderQuestion();
  </script>
</body>
</html>
